<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ 'Editar' if producto else 'Nuevo' }} Producto - Chocolates ByB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --chocolate: #6B4423; --chocolate-dark: #4A2C17; --dorado: #D4AF37; --azul: #007bff; }
        body { font-family: 'Arial', sans-serif; background: #f4f4f4; }
        .admin-layout { display: flex; min-height: 100vh; }
        .sidebar { width: 250px; background: var(--chocolate-dark); color: white; padding: 20px 0; }
        .sidebar h2 { color: var(--dorado); padding: 0 20px 20px; }
        .sidebar-menu { list-style: none; margin-top: 20px; }
        .sidebar-menu a { display: block; color: white; text-decoration: none; padding: 15px 20px; }
        .main-content { flex: 1; padding: 20px; }
        .form-container { background: white; padding: 2rem; border-radius: 10px; max-width: 600px; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; }
        .btn-primary { background: var(--azul); color: white; }
        .btn-secondary { background: #6c757d; color: white; margin-left: 10px; }
        .error { background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 5px; margin-bottom: 1rem; }
        .image-preview { max-width: 200px; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="admin-layout">
        <aside class="sidebar">
            <h2>üç´ Admin Panel</h2>
            <ul class="sidebar-menu">
                <li><a href="/admin">üìä Dashboard</a></li>
                <li><a href="/admin/pedidos">üì¶ Pedidos</a></li>
                <li><a href="/admin/productos">üç´ Productos</a></li>
                <li><a href="/admin/zonas">üìç Zonas</a></li>
                <li><a href="/logout">üö™ Salir</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <h1>{{ 'Editar' if producto else 'Nuevo' }} Producto</h1>
            
            {% if error %}
            <div class="error">{{ error }}</div>
            {% endif %}
            
            <div class="form-container">
                <form method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label>Nombre del Producto</label>
                        <input type="text" name="nombre" value="{{ producto.nombre if producto else '' }}" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Descripci√≥n</label>
                        <textarea name="descripcion" rows="3" required>{{ producto.descripcion if producto else '' }}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Tipo de Chocolate</label>
                        <select name="tipo" required>
                            <option value="">Seleccione tipo</option>
                            <option value="blanco" {% if producto and producto.tipo == 'blanco' %}selected{% endif %}>Chocolate Blanco ‚ö™</option>
                            <option value="con_leche" {% if producto and producto.tipo == 'con_leche' %}selected{% endif %}>Chocolate con Leche üü§</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Tama√±o</label>
                        <select name="tamano" required>
                            <option value="">Seleccione tama√±o</option>
                            <option value="grande" {% if producto and producto.tamano == 'grande' %}selected{% endif %}>Grande</option>
                            <option value="mediano" {% if producto and producto.tamano == 'mediano' %}selected{% endif %}>Mediano</option>
                            <option value="pequeno" {% if producto and producto.tamano == 'pequeno' %}selected{% endif %}>Peque√±o</option>
                            <option value="vulva" {% if producto and producto.tamano == 'vulva' %}selected{% endif %}>Vulva</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Peso</label>
                        <input type="text" name="peso" value="{{ producto.peso if producto else '' }}" required placeholder="Ej: 230g">
                    </div>
                    
                    <div class="form-group">
                        <label>Precio (CUP)</label>
                        <input type="number" step="0.01" name="precio" value="{{ producto.precio if producto else '' }}" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Stock</label>
                        <input type="number" name="stock" value="{{ producto.stock if producto else '50' }}" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Imagen del Producto</label>
                        <input type="file" name="imagen" accept="image/*">
                        {% if producto and producto.imagen %}
                        <div class="image-preview">
                            <p>Imagen actual:</p>
                            <img src="/static/uploads/{{ producto.imagen }}" alt="{{ producto.nombre }}" style="max-width: 100%;">
                        </div>
                        {% endif %}
                    </div>
                    
                    <button type="submit" class="btn btn-primary">
                        {{ 'Actualizar' if producto else 'Guardar' }} Producto
                    </button>
                    <a href="/admin/productos" class="btn btn-secondary">Cancelar</a>
                </form>
            </div>
        </main>
    </div>
</body>
</html>
